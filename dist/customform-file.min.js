!function(e){"use strict";e.CustomFormFile=function(t,s){this.CustomForm=t,this.element={context:this.CustomForm.elementContext,input:this.CustomForm.elementInput,type:this.CustomForm.support.type,wrapper:null,wrapperInput:null,wrapperLabel:null,wrapperFile:null},e.extend(!0,this.settings={},this.CustomForm.settings,e.CustomFormFile.defaults,s),this.prepareOptions()&&this.load()},e.CustomFormFile.defaults={labelText:"Parcourir...",emptyText:"Aucun fichier sélectionné.",multipleText:"{count} fichiers sélectionnés",classes:{label:"{prefix}-label",file:"{prefix}-file",states:{open:"is-open"}},onLoad:void 0,beforeWrap:void 0,afterEventsHandler:void 0,onComplete:void 0,onClick:void 0,onChange:void 0,onReset:void 0},e.CustomFormFile.prototype={prepareOptions:function(){return this.CustomForm.replacePrefixClass.call(this),!0},load:function(){void 0!==this.settings.onLoad&&this.settings.onLoad.call({CustomFormFile:this,element:this.element}),this.wrap(),this.initElementsState(),this.eventsHandler(),this.resetHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({CustomFormFile:this,element:this.element})},wrap:function(){this.element.wrapper=e("<span>",{class:this.settings.classes.prefix+" "+this.settings.classes.prefix+"--"+this.getInputType()}),this.element.wrapperInput=e("<span>",{class:this.settings.classes.input}),this.element.wrapperLabel=e("<span>",{class:this.settings.classes.label,tabindex:this.settings.tabindexStart,html:this.settings.labelText}),this.element.wrapperFile=e("<span>",{class:this.settings.classes.file,html:this.settings.emptyText}),void 0!==this.settings.beforeWrap&&this.settings.beforeWrap.call({CustomFormFile:this,wrapper:this.element.wrapper,wrapperInput:this.element.wrapperInput,wrapperLabel:this.element.wrapperLabel,wrapperFile:this.element.wrapperFile}),this.getInput().parent().wrapInner(this.element.wrapper),this.element.wrapper=this.getInput().parent(),this.getInput().wrap(this.element.wrapperInput),this.element.wrapperInput=this.element.input.parent(),this.element.wrapperLabel.appendTo(this.element.wrapper),this.element.wrapperFile.appendTo(this.element.wrapper)},initElementsState:function(){this.getInput().is(":disabled")&&(this.getWrapper().addClass(this.settings.classes.states.disabled),this.getWrapperLabel().removeAttr("tabindex")),""!==this.getInput().val()&&this.setWrapperFileValue(this.getInput().get(0))},eventsHandler:function(){var t=this;t.getWrapperLabel().on("click keyup",function(e){if("click"===e.type||"keyup"===e.type&&32===e.keyCode){if(e.preventDefault(),t.getInput().is(":disabled"))return;t.getWrapper().addClass(t.settings.classes.states.open),t.getInput().trigger("click").triggerHandler("click"),void 0!==t.settings.onClick&&t.settings.onClick.call({CustomFormFile:t,wrapper:t.getWrapper(),input:t.getInput()})}}),t.getInput().on("change",function(){e(this);t.getWrapper().removeClass(t.settings.classes.states.open),t.setWrapperFileValue(this),void 0!==t.settings.onChange&&t.settings.onChange.call({CustomFormFile:t,wrapper:t.getWrapper(),input:t.getInput()})}),void 0!==t.settings.afterEventsHandler&&t.settings.afterEventsHandler.call({CustomFormFile:this,element:this.element})},resetHandler:function(){var t=this;t.getContext().on("reset",function(){var s=e(this);t.getWrapper().removeClass(t.settings.classes.states.disabled),t.getWrapperFile().text(t.settings.emptyText),setTimeout(function(){t.initElementsState(),void 0!==t.settings.onReset&&t.settings.onReset.call({CustomFormFile:t,form:s})},0)})},setWrapperFileValue:function(e){var t=null;t=void 0!==e.files&&e.files.length>1?this.settings.multipleText.replace(/{count}/,e.files.length):e.value.split("\\").pop(),this.getWrapperFile().text(t)},getContext:function(){return this.element.context},getInput:function(){return this.element.input},getInputType:function(){return this.element.type},getWrapper:function(e){return void 0!==e?e.closest("."+this.settings.classes.prefix):this.element.wrapper},getWrapperLabel:function(){return this.element.wrapperLabel},getWrapperFile:function(){return this.element.wrapperFile}}}(jQuery);