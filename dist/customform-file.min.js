!function(s){"use strict";s.CustomFormFile=function(e,t){return this.customForm=e,this.elements={context:this.customForm.elementContext,input:this.customForm.elementInput,wrapper:null,wrapperInput:null,wrapperLabel:null,wrapperFile:null},s.extend(!0,this.settings={},this.customForm.settings,s.CustomFormFile.defaults,t),this.type=this.customForm.support.type,this.prepareOptions()&&this.init(),this},s.CustomFormFile.defaults={labelText:"Browse...",emptyText:"No file selected.",multipleText:"{count} files selected.",classes:{label:"{prefix}-label",file:"{prefix}-file",open:"is-open",selected:"is-selected"},beforeLoad:void 0,beforeWrap:void 0,afterEventsHandler:void 0,onComplete:void 0,onClick:void 0,onChange:void 0,onReset:void 0},s.CustomFormFile.prototype={prepareOptions:function(){return this.customForm.replacePrefixClass.call(this),!0},init:function(){return void 0!==this.settings.beforeLoad&&this.settings.beforeLoad.call({customFormFile:this,elements:this.getElements()}),this.wrap(),this.reset(),this.eventsHandler(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({customFormFile:this,elements:this.getElements()}),this},wrap:function(){return this.elements.wrapper=s("<span>",{class:this.settings.classes.prefix+" "+this.settings.classes.prefix+"--"+this.getInputType()}),this.elements.wrapperInput=s("<span>",{class:this.settings.classes.input}),this.elements.wrapperLabel=s("<span>",{class:this.settings.classes.label,tabindex:this.settings.tabindexStart,html:this.settings.labelText}),this.elements.wrapperFile=s("<span>",{class:this.settings.classes.file,html:this.settings.emptyText}),void 0!==this.settings.beforeWrap&&this.settings.beforeWrap.call({customFormFile:this,elements:this.getElements()}),this.getInput().parent().wrapInner(this.getWrapper()),this.elements.wrapper=this.getInput().parent(),this.getInput().wrap(this.getWrapperInput()),this.elements.wrapperInput=this.getInput().parent(),this.elements.wrapperLabel.appendTo(this.getWrapperInput()),this.elements.wrapperFile.appendTo(this.getWrapperInput()),this},reset:function(){return this.getWrapper().removeClass(this.settings.classes.disabled),this.getWrapperFile().text(this.settings.emptyText),this.isDisabled()&&(this.getWrapper().addClass(this.settings.classes.disabled),this.getWrapperLabel().removeAttr("tabindex")),""!==this.getInput().val()&&this.setWrapperFileValue(this.getInput().get(0)),this},eventsHandler:function(){var t=this;t.getWrapperLabel().on("click.customform keydown.customform",function(e){if("click"===e.type||"keydown"===e.type&&(32===e.keyCode||13===e.keyCode)){if(e.preventDefault(),t.isDisabled())return;t.getWrapper().addClass(t.settings.classes.open),t.getInput().trigger("click").triggerHandler("click"),void 0!==t.settings.onClick&&t.settings.onClick.call({customFormFile:t,elements:t.getElements()})}}),t.getInput().on("change.customform",function(e){t.getWrapper().removeClass(t.settings.classes.open),t.setWrapperFileValue(e.currentTarget),void 0!==t.settings.onChange&&t.settings.onChange.call({customFormFile:t,elements:t.getElements()})}),t.getContext().on("reset.customform",function(e){setTimeout(function(){t.reset(),void 0!==t.settings.onReset&&t.settings.onReset.call({customFormFile:t,form:s(e.currentTarget)})},0)}),void 0!==t.settings.afterEventsHandler&&t.settings.afterEventsHandler.call({customFormFile:t,elements:t.getElements()})},setWrapperFileValue:function(e){var t=null;return t=void 0!==e.files&&1<e.files.length?this.settings.multipleText.replace(/{count}/,e.files.length):e.value.split("\\").pop(),this.getWrapperFile().text(t),this.getWrapper().addClass(this.settings.classes.selected),this},isDisabled:function(){return this.getInput().is(":disabled")},getElements:function(){return this.elements},getContext:function(){return this.getElements().context},getInput:function(){return this.getElements().input},getInputType:function(){return this.type},getWrapper:function(e){return void 0!==e?e.closest("."+this.settings.classes.prefix):this.getElements().wrapper},getWrapperInput:function(){return this.getElements().wrapperInput},getWrapperLabel:function(){return this.getElements().wrapperLabel},getWrapperFile:function(){return this.getElements().wrapperFile}}}(jQuery);